<div class="row">&nbsp;</div>
<div [hidden]="submitted" style="width: 400px;"></div>
<form [formGroup]="mainForm" (ngSubmit)="onSubmit()">
    <div class="form-group row">
        <div class="col-2">
            <label for="project">Project:</label>
        </div>
        <div class="col-3">
            <input type="text" class="form-control" formControlName="project" required id="project" name="project"
                   [(ngModel)]="task.project">
        </div>
        <div class="col-1">
            <button type="button" class="btn btn-secondary" (click)="openProjectPopup()">Search</button>
            <input type="hidden" class="form-control" formControlName="projectId" required id="projectId"
                   name="projectId" [(ngModel)]="task.projectId">
        </div>
    </div>
    <div class="form-group row">
        <div class="col-2">
            <label for="task">Task:</label>
        </div>
        <div class="col-4">
            <input id="task" name="task" type="text" class="form-control" formControlName="task" required [(ngModel)]="task.task">
        </div>
    </div>
    <div class="form-group row">
        <div class="col-2">
            &nbsp;
        </div>
        <div class="col-4">
            <label class="checkbox-inline"><input type="checkbox" id="parentTaskSelected" name="parentTaskSelected" formControlName="parentTaskSelected" (change)="setTaskAsParent(task);" [(ngModel)]="task.parentTaskSelected"> Parent Task</label>
        </div>
    </div>
    <div class="form-group row">
        <div class="col-2">
            <label for="priority">Priority:</label>
        </div>
        <div class="col-4">
            <span class="font-weight-bold indigo-text mr-2 mt-1">0</span>
            <input type="range" class="border-0" min="0" max="30" class="form-control" formControlName="priority" id="priority"
                   name="priority" [(ngModel)]="task.priority" [value]="0" (input)="priority.value" #priority>
            <span class="font-weight-bold indigo-text ml-2 mt-1">{{ priority.value }}</span>

        </div>
    </div>

    <div class="form-group row">
        <div class="col-2">
            <label for="parenttask">Parent Task:</label>
        </div>
        <div class="col-3">
            <input type="text" class="form-control" required id="parenttask" formControlName="parenttask" name="parenttask"
                   [(ngModel)]="task.parentTask">
        </div>
        <div class="col-1">
            <button type="button" class="btn btn-secondary" (click)="openParentTaskPopup()">Search</button>
            <input type="hidden" class="form-control" formControlName="parenttaskId" required id="parenttaskId"
                   name="parenttaskId" [(ngModel)]="task.parentTaskId">
        </div>
    </div>

    <div class="form-group row">
        <div class="col-2">
            <label for="startdate">Start Date:</label>
        </div>
        <div class="col-4">

            <!-- <dp-date-picker name="startDate" [(ngModel)]="task.startDate" [config]="datePickerConfig"></dp-date-picker>  -->
            <mat-label>Choose a date</mat-label>
            <input class="form-control" formControlName="startDate" required style="display:unset;width:85%" id="startDate" name="startDate"
                   [matDatepicker]="picker" [(ngModel)]="task.startDate">
            <mat-datepicker-toggle class="mat-datepicker-toggle-active" matSuffix
                                   [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-2">
            <label for="enddate">End Date:</label>
        </div>
        <div class="col-4">
            <!--<input type="text" class="form-control" id="endDate" name="endDate" [(ngModel)]="task.endDate">-->
            <mat-label>Choose a date</mat-label>
            <input class="form-control" formControlName="endDate" required style="display:unset;width:85%" id="endDate" name="endDate"
                   [matDatepicker]="endDate" [(ngModel)]="task.endDate">
            <mat-datepicker-toggle class="mat-datepicker-toggle-active" matSuffix
                                   [for]="endDate"></mat-datepicker-toggle>
            <mat-datepicker #endDate></mat-datepicker>
        </div>

    </div>
    <div class="form-group row">
        <div class="col-2">
            <label for="manager">User:</label>
        </div>
        <div class="col-3">
            <input type="text" class="form-control" formControlName="manager" required id="manager" name="manager"
                   [(ngModel)]="task.manager">
        </div>
        <div class="col-1">
            <button type="button" class="btn btn-secondary" (click)="openUserPopup()">Search</button>
            <input type="hidden" class="form-control" formControlName="managerId" required id="managerId"
                   name="managerId" [(ngModel)]="task.managerId">
        </div>
    </div>
    <div class="row">
        <div class="col-2">&nbsp;</div>
        <div class="col-4">
            <button type="submit" class="btn btn-secondary">Add Task</button>&nbsp;
            <button type="button" class="btn btn-secondary">Cancel</button>
        </div>
    </div>
</form>
<div [hidden]="!submitted">
    <h4>You submitted successfully!</h4>
    <!-- <button class="btn btn-success" (click)="newEmployee()">Add</button> -->
</div>
  
